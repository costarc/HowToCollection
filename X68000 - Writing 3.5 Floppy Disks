I describe all the steps required to write 3.5 inch floppy disks using a modern PC, first using Windows 11, then using Linux.

What you need:
- Floppy Disk Drive: Sony Model PCGA-UFD5 (USB)
- DiskImage13b (get it here: https://github.com/costarc/HowToCollection/edit/master/X68000%20-%20Writing%203.5%20Floppy%20Disks/Support Files/DiskImage13b.exe)
- 3.5" 2HD floppy disk, 1.44MB
- The disk image in XDF format - other formats, such as D88 and DIM will not work.

IN this guide, I say to format the floppy before writing a new image. I verified though formatting is not always required, as long as the disk have a valid format already.
X68000 - Writing 3.5 inch floppy disks in Windows
=================================================

This guide was developed and tested in Windows 11 - therefore it is verified that it supports USB Floppy Disk Drives and can write 3.5 floppy disks for X68000.

* Format the disk. For example, to format a disk from command line: format a: /FS:FAT /V:X68000
* Run DiskImage13b and choose these options:
* Windows: Xp/2K
* FD drive: A:
* FD Mode: 1.25M
* HD -> FD (125)
* Select the disk image
* When the popup "INSERT Blank_Disk in DRV !!" appear, click OK
When DiskImage finishes writing the disk, the disk is ready to use.


X68000 - Writing 3.5 inch floppy disks using Linux VM
=====================================================

Writing floppies using Linux is a breeze, even when using a VM (such as a Linux VM running under VirtualBox).

This process is the same as in NFGGames: https://gamesx.com/wiki/doku.php?id=x68000:writing_3.5_floppies

But here, I jump over all the options (which I tried and failed) and go straight to what worked for me, very easily.

1. Install Linux under a VM (or use the real thing if you got a computer running linux already). I recommend Lubuntu, due to smaller footprint compared to other Ubuntu distributions.
2. Install packages required:
  sudo apt install ufiformat
3. Connect the USB floppy drive to the PC. It should be automatically recognized by the Linux VM (probably as device /dev/sdb)
4. Umount the floppy (because by default, it is mounted when plugged into the PC):
  sudo umount /dev/sdb
5. Format the floppy disk
  sudo ufiformat -f 1232 /dev/sdb
6. Transfer your XDF images to a local folder in the linux system (use scp, wget, or other means)
7. Write the XDF image to the floppy disk:
  sudo dd if=flop.xdf of=/dev/sdb

The floppy is ready to use.
